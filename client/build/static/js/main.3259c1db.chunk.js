(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),s=n.n(c),o=n(7),i=n(3),l=n.n(i),d=n(6),u=n(5),j=n(12),b=n(2),h=n(11),m=(n(28),n(1)),p=function(e){var t=e.setTodosChange,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],o=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,(r=new Headers).append("Content-Type","application/json"),r.append("token",localStorage.token),a={description:c},e.next=8,fetch("/dashboard/todos",{method:"POST",headers:r,body:JSON.stringify(a)});case 8:return o=e.sent,e.next=11,o.json();case 11:e.sent,t(!0),s(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)("h1",{className:"text-center mt-5",children:"Pern Todo List"}),Object(m.jsxs)("form",{className:"d-flex m-5",onSubmit:o,children:[Object(m.jsx)("input",{className:"form-control",type:"text",placeholder:"Add Todo",onChange:function(e){return s(e.target.value)},value:c}),Object(m.jsx)("button",{className:"btn btn-success ml-3",children:"Add"})]})]})},O=function(e){var t=e.todo,n=e.setTodosChange,a=Object(r.useState)(t.description),c=Object(u.a)(a,2),s=c[0],o=c[1],i=function(){var e=Object(d.a)(l.a.mark((function e(r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),(a=new Headers).append("Content-Type","application/json"),a.append("token",localStorage.token),e.prev=4,c={description:s},e.next=8,fetch("/dashboard/todos/".concat(t.todo_id),{method:"PUT",headers:a,body:JSON.stringify(c)});case 8:n(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)("button",{type:"button",className:"btn btn-warning","data-toggle":"modal","data-target":"#id".concat(t.todo_id),children:"Edit"}),Object(m.jsx)("div",{className:"modal",id:"id".concat(t.todo_id),onClick:function(){return o(t.description)},children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h4",{className:"modal-title",children:"Modal Heading"}),Object(m.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return o(t.description)},children:"\xd7"})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("input",{type:"text",className:"form-control",value:s||"",onChange:function(e){return o(e.target.value)}})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-warning","data-dismiss":"modal",onClick:function(e){return i(e)},children:"Edit"}),Object(m.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return o(t.description)},children:"Close"})]})]})})})]})},x=function(e){var t=e.allTodos,n=e.setTodosChange,a=Object(r.useState)([]),c=Object(u.a)(a,2),s=c[0],o=c[1],i=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/dashboard/todos/".concat(t),{method:"DELETE",headers:{token:localStorage.token}});case 2:o(s.filter((function(e){return e.todo_id!==t})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o(t)}),[t]),Object(m.jsx)(r.Fragment,{children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"})]})}),Object(m.jsx)("tbody",{children:0!==s.length&&null!==s[0].todo_id&&s.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.description}),Object(m.jsx)("td",{children:Object(m.jsx)(O,{todo:e,setTodosChange:n})}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{className:"btn btn-danger",onClick:function(){return i(e.todo_id)},children:"Delete"})})]},e.todo_id)}))})]})})})},f=function(e){var t=e.setAuth,n=e.setLoader,a=Object(r.useState)(""),c=Object(u.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)([]),j=Object(u.a)(i,2),b=j[0],O=j[1],f=Object(r.useState)(!1),g=Object(u.a)(f,2),v=g[0],y=g[1],N=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,O(n),o(n[0].user_name),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){N(),y(!1)}),[v]);return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsxs)("div",{className:"d-flex mt-5 justify-content-around",children:[Object(m.jsxs)("h2",{children:[s,"'s Todo List"]}),Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),n(!1),h.a.success("Logging Out")}(e)},children:"Log Out"})]}),Object(m.jsx)(p,{setTodosChange:y}),Object(m.jsx)(x,{allTodos:b,setTodosChange:y})]})},g=n(14),v=function(e){var t=e.setAuth,n=Object(r.useState)({email:"",password:""}),a=Object(u.a)(n,2),c=a[0],s=a[1],i=c.email,b=c.password,p=function(e){return s(Object(o.a)(Object(o.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={email:i,password:b},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return a=e.sent,e.next=8,a.json();case 8:(c=e.sent).token?(localStorage.setItem("token",c.token),t(!0),h.a.success("Login Successful")):(t(!1),h.a.error(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)("h1",{className:"text-center my-5",children:"Login"}),Object(m.jsxs)("form",{onSubmit:O,children:[Object(m.jsx)("input",{className:"form-control my-3",value:i,onChange:function(e){return p(e)},type:"email",name:"email",placeholder:"Email"}),Object(m.jsx)("input",{className:"form-control my-3",value:b,onChange:function(e){return p(e)},type:"password",name:"password",placeholder:"Password"}),Object(m.jsx)("button",{className:"btn btn-success",children:"Login"})]}),Object(m.jsx)(j.b,{to:"/register",children:"Don't have an Account? Register"})]})},y=function(e){var t=e.setAuth,n=Object(r.useState)({name:"",email:"",password:""}),a=Object(u.a)(n,2),c=a[0],s=a[1],i=c.name,b=c.email,p=c.password,O=function(e){return s(Object(o.a)(Object(o.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={name:i,email:b,password:p},e.next=5,fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return a=e.sent,e.next=8,a.json();case 8:(c=e.sent).token?(localStorage.setItem("token",c.token),t(!0),h.a.success("Registered Successfully")):(t(!1),h.a.error(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(m.jsxs)("form",{onSubmit:x,children:[Object(m.jsx)("input",{className:"form-control my-3",value:i,onChange:function(e){return O(e)},type:"text",name:"name",placeholder:"Name"}),Object(m.jsx)("input",{className:"form-control my-3",value:b,onChange:function(e){return O(e)},type:"email",name:"email",placeholder:"Email"}),Object(m.jsx)("input",{className:"form-control my-3",value:p,onChange:function(e){return O(e)},type:"password",name:"password",placeholder:"Password"}),Object(m.jsx)("button",{className:"btn btn-success",children:"Register"})]}),Object(m.jsx)(j.b,{to:"/login",children:"Already Registered? Log in"})]})},N=function(){return Object(m.jsxs)("div",{className:"jumbotron my-5",children:[Object(m.jsx)("h1",{children:"Welcome to Todo App"}),Object(m.jsx)("p",{children:"Sign in to start building your todos"}),Object(m.jsx)(j.b,{to:"/login",className:"btn btn-primary",children:"Login"}),Object(m.jsx)(j.b,{to:"/register",className:"btn btn-primary ml-3",children:"Register"})]})},k=(n(35),n(36),function(){return Object(m.jsx)("div",{className:"spinner-border my-5 text-primary",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})})});h.a.configure();var w=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),s=Object(u.a)(c,2),i=s[0],h=s[1],p=function(e){a(e)},O=function(e){h(e)},x=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:!0===e.sent?a(!0):(h(!1),a(!1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){x()}),[]),Object(m.jsx)(r.Fragment,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{exact:!0,path:"/",render:function(e){return n?Object(m.jsx)(b.a,{to:"/dashboard"}):Object(m.jsx)(N,Object(o.a)({},e))}}),Object(m.jsx)(b.b,{exact:!0,path:"/login",render:function(e){return n?Object(m.jsx)(b.a,{to:"/dashboard"}):Object(m.jsx)(v,Object(o.a)(Object(o.a)({},e),{},{setAuth:p}))}}),Object(m.jsx)(b.b,{exact:!0,path:"/register",render:function(e){return n?Object(m.jsx)(b.a,{to:"/login"}):Object(m.jsx)(y,Object(o.a)(Object(o.a)({},e),{},{setAuth:p}))}}),Object(m.jsx)(b.b,{exact:!0,path:"/dashboard",render:function(e){return n?Object(m.jsx)(f,Object(o.a)(Object(o.a)({},e),{},{setLoader:O,setAuth:p})):i?Object(m.jsx)(k,{}):Object(m.jsx)(b.a,{to:"/login"})}})]})})})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.3259c1db.chunk.js.map